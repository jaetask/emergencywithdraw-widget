{"version":3,"sources":["config/constants/contracts.js","utils/contractHelper.js","utils/addressHelper.js","config/index.js","actions/emergencyWithdraw.js","contexts/AddressContext.js","hooks/useWeb3.js","hooks/usePools.js","hooks/useContract.js","config/constants/explorers.js","components/Pool.js","components/Pools.js","components/MasterchefSearch.js","App.js","reportWebVitals.js","index.js"],"names":["contracts","fetcher","137","56","getDefaultGasPrice","web3","chainId","toBN","utils","gasPrices","mul","pow","getContract","abi","address","undefined","eth","Contract","gasPrice","toString","getFetcherContract","fetcherAbi","getAddress","getFetcherAddress","getMasterchefContract","masterchefAddress","masterchefAbi","emergencyWithdraw","pid","a","masterchefContract","methods","send","from","currentProvider","selectedAddress","tx","wait","receipt","notification","open","message","status","console","error","AddressContext","createContext","providerOptions","walletconnect","package","WalletConnectProvider","options","infuraId","web3Modal","Web3Modal","cacheProvider","useWeb3","useState","provider","setProvider","web3info","setWeb3Info","useEffect","connect","provider_","Web3","net","getId","then","info","usePools","pools","setPools","useContext","userAddress","useMemo","useFetcher","result","rawPools","start","interval","fetchPools","call","filter","pool","want","i","length","push","name","symbol","amount","description","fetch","explorers","getAddressLink","Pool","props","onEmergencyWithdraw","Item","Meta","avatar","src","title","target","rel","href","type","danger","onClick","Pools","item","mc","doEmergencyWithdraw","orientation","className","size","itemLayout","dataSource","renderItem","Search","Input","MasterchefSearch","onStart","placeholder","allowClear","enterButton","onSearch","App","setMasterchefAddress","setUserAddress","masterchefAddress_","log","Provider","value","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d062c37c.chunk.js","sourcesContent":["// list of contracts\n// Fetcher: Helper contract that is essential for a chain to work. It fetches all the pool data and returns it in a single call\nconst contracts = {\n  fetcher: {\n    137: \"0x9BD3829315A2F076a7702885c3D0aE9184B76643\",\n    56: \"\",\n  },\n};\n\nexport default contracts\n","import fetcherAbi from \"../config/abi/fetcher.json\";\nimport masterchefAbi from \"../config/abi/masterchef.json\";\nimport { getFetcherAddress } from \"./addressHelper\";\n\nexport const getDefaultGasPrice = (web3, chainId) => {\n  const toBN = web3.utils.toBN;\n  const gasPrices = {\n    56: toBN(5).mul(toBN(10).pow(toBN(9))),\n    137: toBN(1).mul(toBN(10).pow(toBN(9))),\n  };\n\n  return chainId in gasPrices ? gasPrices[chainId] : 0;\n};\nconst getContract = (abi, address, web3, chainId) => {\n  if (web3 === undefined) {\n    return undefined;\n  }\n  return new web3.eth.Contract(abi, address, {\n    gasPrice: getDefaultGasPrice(web3, chainId).toString(),\n  });\n};\n\nexport const getFetcherContract = (web3, chainId) => {\n  if (web3 === undefined || web3.eth === undefined) {\n    return undefined;\n  }\n  return getContract(\n    fetcherAbi,\n    getFetcherAddress(chainId, web3),\n    web3,\n    chainId\n  );\n};\n\nexport const getMasterchefContract = (web3, chainId, masterchefAddress) => {\n  if (\n    web3 === undefined ||\n    web3.eth === undefined ||\n    masterchefAddress == null\n  ) {\n    return undefined;\n  }\n  return getContract(masterchefAbi, masterchefAddress, web3, chainId);\n};\n","import { BSC_CHAIN_ID } from \"../config\";\nimport contracts from \"../config/constants/contracts\";\n\nexport const getAddress = (address, chainId) => {\n  return address[chainId] ? address[chainId] : address[BSC_CHAIN_ID];\n};\n\nexport const getFetcherAddress = (chainId) => {\n  return getAddress(contracts.fetcher, chainId);\n};\n\nexport const ZERO_ADDRESS = \"0x0000000000000000000000000000000000000000\";\n","export const BSC_CHAIN_ID = 56;\n","import { notification } from \"antd\"\nimport { getDefaultGasPrice, getMasterchefContract } from \"../utils/contractHelper\"\n\nconst emergencyWithdraw = (web3, chainId, masterchefAddress, pid) => {\n    return async () => {\n        try {\n            const masterchefContract = getMasterchefContract(web3, chainId, masterchefAddress)\n            const tx = await masterchefContract.methods.emergencyWithdraw(pid).send({\n                from: web3.currentProvider.selectedAddress,\n                gasPrice: getDefaultGasPrice(web3, chainId)\n            })\n            const receipt = await tx.wait()\n\n            notification.open({\n                message: 'Transaction Succeeded'\n            })\n            return receipt.status\n        } catch (e) {\n            console.error(e)\n            notification.open({\n                message: 'Transaction failed'\n            })\n        }\n    }\n}\nexport default emergencyWithdraw","// Context to share the masterchef address state between components\n\nimport { createContext } from \"react\";\n\nconst AddressContext = createContext();\n\nexport default AddressContext;\n","import { useEffect, useState } from \"react\";\n\nimport Web3 from \"web3\";\nimport Web3Modal from \"web3modal\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\n\nconst providerOptions = {\n  walletconnect: {\n    package: WalletConnectProvider,\n    options: {\n      infuraId: \"INFURA_ID\", // required, TODO: still needs to be set to our infura_id.\n    },\n  },\n};\n\nconst web3Modal = new Web3Modal({\n  cacheProvider: true, // optional\n  providerOptions, // required\n});\n\nconst useWeb3 = () => {\n  //todo: useWeb3Provider\n  const [provider, setProvider] = useState();\n  const [web3info, setWeb3Info] = useState({\n    web3: undefined,\n    chainId: undefined,\n  });\n  useEffect(() => {\n    const connect = async () => {\n      const provider_ = await web3Modal.connect();\n      setProvider(provider_);\n      const web3 = new Web3(provider_);\n      const chainId = await web3.eth.net.getId();\n      return { web3, chainId };\n    };\n    connect().then((info) => {\n      setWeb3Info(info);\n    });\n  }, [provider]);\n\n  // const disconnect = async () => {\n  //   // explicitly close when wallet connect is used\n  //   if (provider && provider.close) {\n  //     await provider.close();\n  //   }\n  //   web3Modal.clearCachedProvider();\n\n  //   setProvider(undefined);\n  //   setWeb3Info(undefined);\n  // };\n\n  return web3info;\n};\n\nexport default useWeb3;\n","import { notification } from \"antd\";\nimport { useContext, useEffect, useState } from \"react\"\nimport AddressContext from \"../contexts/AddressContext\";\nimport { useFetcher } from \"./useContract\";\nimport useWeb3 from \"./useWeb3\";\n\nconst usePools = () => {\n  const web3 = useWeb3()\n  const [pools, setPools] = useState()\n  const {masterchefAddress, userAddress} = useContext(AddressContext);\n  const fetcher = useFetcher();\n  useEffect(() => {\n    const fetch = async () => {\n      if (fetcher === undefined || web3 === undefined || masterchefAddress === undefined || userAddress === undefined) {\n        return []\n      }\n      let  result = []\n      let rawPools = []\n      let start = 0\n      const interval = 10\n      try {\n      do {\n        rawPools = await fetcher.methods.fetchPools(masterchefAddress, userAddress, start, interval).call()\n        // Currently fetcher always returns 10 pools, filter out padding ones\n        rawPools = rawPools.filter(pool => pool.want !== \"0x0000000000000000000000000000000000000000\") \n        for(let i = 0; i < rawPools.length; i++) {\n          const pool = rawPools[i]\n          result.push({\n            \"name\": pool.name, \n            \"symbol\": pool.symbol, \n            \"amount\": pool.amount, \n            \"pid\": start + i, \n            \"want\": pool.want,\n            \"mc\": masterchefAddress})\n        }\n        start += interval\n        \n      } while(rawPools.length >= interval && start <= 200) // Give up after 200 pools\n    }catch(e){\n        console.error(e)\n        notification.open({\n          message: 'Unable to fetch masterchef',\n          description: 'Are you sure the address is correct?'\n        })\n    }\n      return result\n    }\n    fetch().then(pools => {\n      setPools(pools);\n    })\n  }, [masterchefAddress, userAddress, fetcher, web3])\n\n  return pools\n}\n\nexport default usePools","import { useMemo } from \"react\";\nimport {\n  getFetcherContract,\n} from \"../utils/contractHelper\";\nimport useWeb3 from \"./useWeb3\";\n\nexport const useFetcher = () => {\n  const { web3, chainId } = useWeb3();\n  return useMemo(() => getFetcherContract(web3, chainId), [web3, chainId]);\n};","// Utility methods to get explorer links\n\nexport const explorers = {\n      137: \"https://polygonscan.com\",\n      56: \"https://bscscan.com\",\n  };\nexport const getAddressLink = (chainId, address) => {\n    return explorers[chainId] + \"/address/\" + address\n}","import { Avatar, List, Button } from \"antd\";\nimport { getAddressLink } from \"../config/constants/explorers\";\n\n// The pool component is an entry in the pools list that represents a masterchef pool\n// When the emergencyWithdraw button is pressed, the injected \"onEmergencyWithdraw\" method is called.\nfunction Pool(props) {\n  const { name, symbol, amount, pid, chainId, want, onEmergencyWithdraw } = props;\n\n  return (\n    <List.Item>\n      <List.Item.Meta\n        avatar={\n          <Avatar src=\"https://cryptologos.cc/logos/binance-usd-busd-logo.svg?v=010\" />\n        }\n        title={<a target=\"_blank\" rel=\"noreferrer\" href={getAddressLink(chainId,want)}>{name} - pid: {pid}</a>}\n        description={amount + \" \" + symbol}\n      />\n\n      <div>\n        {\" \"}\n        <Button type=\"primary\" danger onClick={onEmergencyWithdraw}>\n          Emergency Withdraw\n        </Button>\n      </div>\n    </List.Item>\n  );\n}\nexport default Pool;\n","import { List, Divider } from \"antd\";\nimport emergencyWithdraw from \"../actions/emergencyWithdraw\";\nimport usePools from \"../hooks/usePools\";\nimport useWeb3 from \"../hooks/useWeb3\";\n\nimport Pool from \"./Pool\";\n\nfunction Pools() {\n  const pools = usePools();\n  const { web3, chainId } = useWeb3();\n  const onEmergencyWithdraw = async (item) => {\n    const doEmergencyWithdraw = emergencyWithdraw(\n      web3,\n      chainId,\n      item.mc,\n      item.pid\n    );\n    doEmergencyWithdraw();\n  };\n  return (\n    <>\n      <Divider orientation=\"left\">Pools</Divider>\n      <List\n        className=\"demo-loadmore-list\"\n        size=\"large\"\n        itemLayout=\"horizontal\"\n        dataSource={pools}\n        renderItem={(item) => (\n          <Pool\n            name={item.name}\n            symbol={item.symbol}\n            amount={item.amount}\n            pid={item.pid}\n            chainId={chainId}\n            want={item.want}\n            onEmergencyWithdraw={() => onEmergencyWithdraw(item)}\n          ></Pool>\n        )}\n      />\n    </>\n  );\n}\nexport default Pools;\n","import { Input } from \"antd\";\n\nconst { Search } = Input;\n\n// Masterchef input component that calls the injected onStart method with the masterchef address as parameter\nfunction MasterchefSearch(props) {\n  const { onStart } = props;\n  return (\n    <Search\n      placeholder=\"Masterchef\"\n      allowClear\n      enterButton=\"Start\"\n      size=\"large\"\n      onSearch={onStart}\n    />\n  );\n}\n\nexport default MasterchefSearch;\n","import \"./App.css\";\n\nimport Pools from \"./components/Pools\";\nimport MasterchefSearch from \"./components/MasterchefSearch\";\nimport { useEffect, useState } from \"react\";\nimport AddressContext from \"./contexts/AddressContext\";\nimport { ZERO_ADDRESS } from \"./utils/addressHelper\";\nimport useWeb3 from \"./hooks/useWeb3\";\n\nfunction App() {\n  const web3 = useWeb3();\n  const [masterchefAddress, setMasterchefAddress] = useState(undefined);\n  const [userAddress, setUserAddress] = useState(ZERO_ADDRESS);\n  useEffect(() => {\n    if (\n      web3 === undefined ||\n      web3.currentProvider === undefined ||\n      web3.currentProvider.selectedAddress === undefined\n    ) {\n      return;\n    }\n\n    setUserAddress(web3.currentProvider.selectedAddress);\n  }, [web3]);\n\n  const onStart = async (masterchefAddress_) => {\n    console.log(\"searching: \" + masterchefAddress_)\n    setMasterchefAddress(masterchefAddress_);\n  };\n\n  return (\n    <AddressContext.Provider value={{ masterchefAddress, userAddress }}>\n      <div className=\"App\">\n        <MasterchefSearch onStart={onStart} />\n        <Pools />\n      </div>\n    </AddressContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}